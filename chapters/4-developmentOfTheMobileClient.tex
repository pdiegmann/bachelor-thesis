\section{The Development of the mobile Client}
\subsection{Preconditions}\subsubsection{Norms for mobile Apps}
As already mentioned, ePill is currently only used in Germany, therefor we will focus on laws applicable in Germany. These laws are namely the \TKGns, the \TMGns, the \REG as well as the \DPA of \NRWns. The \TKG and \TMG are laws by state, whereas \REG is an european directive, specified by the respective Member States. 
\\
German federal states have their own \DPAsns. In this thesis we will focus on the \DPA of \NRW as ePill is located in \NRWns.
\\
\\
As the topmost layer of laws, the \REG defines more general directives. Article 4 defines national law applicable, if the natural or legal person, the controller\footnote{cf. \cite{TheEuropeanParliamentandtheCounciloftheEuropeanUnion.24.10.1995}, Article 2, (d)}, is located on a Member State's territory\footnote{cf. \cite{TheEuropeanParliamentandtheCounciloftheEuropeanUnion.24.10.1995}, Article 4, 1., (a) and (b)} or if any of the processing takes place on a Member State's territory\footnote{cf. \cite{TheEuropeanParliamentandtheCounciloftheEuropeanUnion.24.10.1995}, Article 4, 1., (c)}. Furthermore it is required, that the controller asks the user to consent to the use and collection of data\footnote{cf. \cite{TheEuropeanParliamentandtheCounciloftheEuropeanUnion.24.10.1995}, Article 7, (a)}, explicitly "data concerning health and sex life"\footnote{\cite{TheEuropeanParliamentandtheCounciloftheEuropeanUnion.24.10.1995}, Article 8, 1.} shall not be processed. Only if the user consents explicitly\footnote{cf. \cite{TheEuropeanParliamentandtheCounciloftheEuropeanUnion.24.10.1995}, Article 8, 2., (a)} or if the processing is done by a healthcare professional under national law and for preventive medicine, medical diagnosis or treatment or for the management of health-care services\footnote{cf. \cite{TheEuropeanParliamentandtheCounciloftheEuropeanUnion.24.10.1995}, Article 8, 3.}. 
\\
\\
This is refined by the the \TMGns. § 13, section (1) states, that the controller has to inform the user in a commonly understandable manner about the data which is collected and the form of processing of this data\footnote{cf. \cite{BundesregierungderBundesrepublikDeutschland.01.03.2007}, § 13, section (1)}. For a legal consent, the controller has to ensure, that the user is aware of his consent, that the consent is minuted, that the content of the consent is always available to the user and that the user can revoke his consent\footnote{cf. \cite{BundesregierungderBundesrepublikDeutschland.01.03.2007}, § 13, section (2)}.
\\
§§ 91, 93 and 94 of the \TKG states the same laws\footnote{cf. \cite{BundesregierungderBundesrepublikDeutschland.01.08.1996}, Section 2, §§ 91, 93, 94}.
\\
Also the \DPA of \NRW constitutes the same laws\footnote{cf. \cite{DerInnenministerdesLandesNordrheinWestfalen.09.06.2000}, Section 1, §§ 2, 4, 5} with the only restrictions, that its scope is limited to \NRWns.
\\
\\
Therefor ePill should explicitly inform the user that no data is stored and only anonymized transacted to find matching results, to comply with the stated laws.
\subsubsection{Best Practices}
The World Wide Web Consortium (W3C) has published a document in 2008 which states the basic best practices for developing for the mobile web. This document states 60 best practices, which shall ensure a minimum quality level for mobile web applications. These best practices emphasize the need of regard of the device's capabilities and supported technologies\footnote{cf. \cite{WorldWideWebConsortium.2008}, e.g. 2., 11., 21., 42.}. 
\\
This document focuses on mobile web development\footnote{cf. \cite{WorldWideWebConsortium.2008}, Abstract}, which has of course differences to native app development (e.g. the usage of frames and the accessibility of the device's specific features), most of the best practices are applicable in both development environments.
\\
\\
For this specific project, which does not need more specific device capabilities, like positioning and navigation features, we can focus on best practices related to the user interface, input and navigation methods as well as general best practices. Depending on the framework chosen, some of the best practices are already dealt with by the framework or at least supported. E.g. a thematic consistency\footnote{cf. \cite{WorldWideWebConsortium.2008}, 1.} is provided by native apps by default and by frameworks such as the TouchKit for Vaadin as well. Although they can be overridden, they provide a consistent theme. \cite{Wessels.2011} support the importance of a consistent appearance, also in comparison to a desktop application, if existent\footnote{cf. \cite{Wessels.2011}, p. 2}. \cite{Lica.2010} further limits this to specific elements and points out, that mobile apps should provide just enough functionality to be useful and should not replicate the desktop optimized website\footnote{cf. \cite{Lica.2010}, p. 66}.
\\
Other best practices like utilizing a navigation bar at the page's top\footnote{cf. \cite{WorldWideWebConsortium.2008}, 8.} for the main navigation have already become a standard across different platforms and frameworks.
\\
\\
Best practices which are mainly determined by implementations of the developer, like the usage of colors\footnote{cf. \cite{WorldWideWebConsortium.2008}, 26., 27} or the chosen input methods\footnote{cf.\cite{WorldWideWebConsortium.2008}, 55., 56., 57.} are often supported by the different platforms or frameworks but cannot be guaranteed by those. Even if different input methods like a number pad for numeric inputs are provided by the framework or platform they still need to be adapted and utilized by the developer to act in line with the best practices.
\\
\\
\cite{WorldWideWebConsortium.2008} furthermore specifies a "Default Delivery Context"\footnote{cf. \cite{WorldWideWebConsortium.2008}, 3.7 Default Delivery Context}, which defines the minimal capabilities for mobile devices which should be supported. \ref{tab:DefaultDeliveryContext} illustrates the minimal capabilities suggested by W3C.
\\
Nowadays it will be hard to match all of the requirements. E.g. a total maximum page weight of 20 kilobytes corresponds to the average file size of a 200 by 120 pixel JPEG-compressed file is about 10 kilobytes\footnote{Tested with 60\% compression rate and a random photograph} and two images would already exceed the maximum page weight. With mobile devices like a Samsung Galaxy S3 which has a minimum of 720 pixel wide display, 120 pixels are far too less.
\\
Also nearly any mobile browser supports client side scripting (e.g. JavaScript). For more detail, \url{http://caniuse.com} has compatibility lists of different browser features for nearly any browser. The parsing of JavaScript Object Notation (JSON) for example is supported by 93.41\% of all mobile browsers\footnote{cf. \url{http://caniuse.com/\#cats=JS_API}, JSON parsing}.
\begin{table}[!tb]
    \center
    \begin{tabular}{l | p{21.5em}}
        \textbf{Parameter} & \textbf{Value} \\
        \hline
        Usable Screen Width & 120px \\
        \hline
        Markup Language Support & XHTML Basic 1.1 delivered with content type application/xhtml+xml. \\
        \hline
        Character Encoding & UTF-8 \\
        \hline
        Image Format Support & JPEG. \\
        & GIF 89a. \\
        \hline
        Maximum Total Page Weight & 20 kilobytes. \\
        \hline
        Colors & 256 Colors, minimum. \\
        \hline
        Style Sheet Support & CSS Level 1. In addition, CSS Level 2 @media rule together with the handheld and all media types. \\
        \hline
        HTTP & HTTP/1.0 or more recent. \\
        \hline
        Script & No support for client side scripting. \\
    \end{tabular}
    \caption[Mobile Default Delivery Context]{Default Delivery Context\footnotemark}
    \label{tab:DefaultDeliveryContext}
\end{table}
\footnotetext{cf. \cite{WorldWideWebConsortium.2008}, 3.7 Default Delivery Context}
\\
Nevertheless, minimizing the total page size is still a concern. \cite{Wessels.2011} points out, that smaller pages lead to faster load times and therefor provide a more efficient experience for the user\footnote{cf. \cite{Wessels.2011}, p. 1}. \cite{Nicolaou.2013} suggests different approaches to reduce page size as well as load time: Scripts and markup should be minified\footnote{cf. \cite{Nicolaou.2013}, p. 49} and included inline\footnote{cf. \cite{Nicolaou.2013}, p. 50} where it is possible. Preloading components and reducing DNS lookups can also result in a faster user experience\footnote{cf. \cite{Nicolaou.2013}, pp. 48, 49}.
\\
Generally, \cite{Nicolaou.2013} recommends using a Content Delivery System (CDN), putting style sheets at the page's top and scripts at the bottom and using resized images rather than scaling them via HTML or CSS\footnote{cf. \cite{Nicolaou.2013}, pp. 49, 50}.
\\
\\
A study by \cite{Dahanayake.2010} came to the result, that 71\% of all responding web developers knew about the best practices, but only 11\% said, that they understand these, 56\% have a vague understanding and 33\% do not understand the best practices \footnote{cf. \cite{Dahanayake.2010}, p. 85}.
\\
\\
\cite{AyobNurulZakiahbinti.2009} adjusted and combined four different guidelines for application development, namely Shneiderman’s Golden Rules of Interface Design, Seven Usability Guideline for Mobile Device (Abid Warsi, 2007), Human-Centred Design (ISO Standard 13407) and Mobile Web Best Practices 1.0 (W3C). From those guidelines, they developed the Three Layers Design Guideline for Mobile Application\footnote{cf. \cite{AyobNurulZakiahbinti.2009}, p. 430}. This guideline consists of three phases, which themselves represent different contexts, namely analysis (and the context of use), design (the context of medium) and testing (the context of evaluation). \ref{tab:ThreeLayersDesignGuideline} illustrates this guideline.
\\
\\
This thesis will follow the Three Layers Design Guideline, as it is the latest guideline and combines multiple approved other guidelines. The third phase will likely be shortened due to the temporal restrictions for this thesis. The exact process we followed will be outlined in the following sections \ref{sec:Analysis}, \ref{sec:Planning}, \ref{sec:Design}, \ref{sec:Implementation} and \ref{sec:Validation} and the experiences made will be discussed in section \ref{sec:LessonsLearned}.

\begin{table}[!htb]
    \center
    \begin{tabular}{c | c | p{23.5em}}
        \multicolumn{2}{c | }{\textbf{Phase}} & \textbf{Context of Use and Activities} \\
        \hline
        1 & Analysis & \textbf{Use}: Specify user and organizational requirements \\
        \cline{3-3}
        & & 
            \begin{enumerate}
                \item Identify and document user’s tasks                \item Identify and document organizational environment                \item Define the use of the system
            \end{enumerate} 
        \\
        \hline
        2 & Design & \textbf{Medium}: Produce design solution \\
        \cline{3-3}
        & & 
            \begin{enumerate}
                \item Enable frequent users to use shortcuts                \item Offer informative feedback                \item Consistency                \item Reversal of actions                \item Error prevention and simple error handling                \item Reduce short-term memory load                \item Design for multiple and dynamic contexts                \item Design for small devices                \item Design for speed and recovery                \item Design for “top-down” interaction                \item Allow for personalization                \item Don't repeat the navigation on every page                \item Clearly distinguish selected items
            \end{enumerate}
        \\
        \hline
        3 & Testing & \textbf{Evaluation}: Evaluate design against user requirements \\
        \cline{3-3}
        & & 
            \begin{enumerate}
                \item Quick approach                \item Usability testing                \item Field studies                \item Predictive evaluation
            \end{enumerate}
        \\
    \end{tabular}
    \caption[Three Layers Design Guideline for Mobile Application]{Three Layers Design Guideline for Mobile Application\footnotemark}
    \label{tab:ThreeLayersDesignGuideline}
\end{table}
\footnotetext{cf. \cite{AyobNurulZakiahbinti.2009}, p. 430, Table IV}
\subsubsection{Internal requirements}
For developing a mobile frontend for ePill, it is important to us, that the main functionality of the web client is optimized but not reduced. Therefor a good user interface is indispensable. All functionality should be accessible easily and without confusion for the user. Interactive elements like buttons should be visibly salient and have an immediate response to reduce the user's uncertainty. The general design, the color scheme and the fonts should be used in line with the web application to improve the recognition value. 
\\
Another top priority is the accessibility of the app for as many users as possible. Therefor it is needed to provide a cross-platform app to be accessible for as many mobile platforms as possible and to have an intuitive user interface which also enables e.g. elderly people to use it efficiently.
\\
\todo{More?}\subsection{Analysis}
\label{sec:Analysis}\subsubsection{Assignment of a mHealth App Category}
The mobile app does not differ from the web application in terms of privacy risks, content or connectivity because it has exactly the same functions and does also not store any data and serves the same purpose for connectivity.
\\
We plan to implement every request to the server to be optimized for SSL-encryption as soon as the server is capable of accepting and responding with SSL-encryption. 
\\
\\
Therefor we would suggest to categorize the ePill mobile application as a low privacy risk, drug- and safety-related medical connectivity mHealth application.

\subsubsection{The different Operation Systems}\paragraph{Android}\paragraph{iOS}\paragraph{Windows Phone 7 and 8}\paragraph{other}
\subsubsection{Possible Frameworks and Technologies}
\paragraph{Completely native}\paragraph{HTML 5, jQuery mobile and Phone Gap}
\paragraph{Xamarin}
\paragraph{Vaadin}
\subsubsection{The Choice for Framework XYZ}
\subsection{The Planning Process}
\label{sec:Planning}
\subsection{(The Design Process)}
\label{sec:Design}
\subsection{The Implementation Process}
\label{sec:Implementation}

\subsection{Validation of the mobile Client}
\label{sec:Validation}